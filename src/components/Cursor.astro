---
---
<div id="custom-cursor" class="hidden lg:block fixed top-0 left-0 w-24 h-24 pointer-events-none z-[9999] mix-blend-difference">
  <!-- Liquid Outer Ring -->
  <div class="cursor-main absolute inset-0 border border-accent/20 rounded-full scale-100 transition-transform duration-500 ease-out"></div>
  
  <!-- Photographic/Image-based Anatomical Asset -->
  <div class="cursor-inner absolute inset-0 flex items-center justify-center opacity-90 overflow-hidden">
    <!-- Using a highly realistic anatomical artistic asset -->
    <img 
      src="https://images.unsplash.com/photo-1509631179647-0177331693ae?auto=format&fit=crop&q=80&w=400" 
      alt="Anatomical Study" 
      class="w-full h-full object-contain filter grayscale contrast-125 brightness-90 animate-subtle-pulse"
      style="mask-image: radial-gradient(circle, white 40%, transparent 80%); -webkit-mask-image: radial-gradient(circle, white 40%, transparent 80%);"
    />
  </div>
</div>

<style>
  #custom-cursor {
    will-change: transform;
    transition: width 0.3s, height 0.3s;
  }
  
  @keyframes subtle-pulse {
    0%, 100% { transform: scale(1); opacity: 0.9; }
    50% { transform: scale(1.02); opacity: 1; }
  }
  
  .animate-subtle-pulse {
    animation: subtle-pulse 4s ease-in-out infinite;
  }
</style>

<script>
  function setupCursor() {
    const cursor = document.getElementById('custom-cursor');
    const main = cursor?.querySelector('.cursor-main');
    const inner = cursor?.querySelector('.cursor-inner');
    
    if (!cursor || !main || !inner) return;

    let posX = 0, posY = 0;
    let mouseX = 0, mouseY = 0;

    // Fluid lag for organic feel
    const lag = 0.08;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    function animate() {
      posX += (mouseX - posX) * lag;
      posY += (mouseY - posY) * lag;

      // w-24 = 96px. half is 48px.
      cursor.style.transform = `translate3d(${posX - 48}px, ${posY - 48}px, 0)`;
      requestAnimationFrame(animate);
    }

    animate();

    // Interaction effects
    const interactiveElements = document.querySelectorAll('a, button, input, .group');
    
    interactiveElements.forEach(el => {
      el.addEventListener('mouseenter', () => {
        main.style.transform = 'scale(1.3)';
        main.style.borderColor = 'rgba(44, 93, 99, 0.6)'; // ocean theme
        inner.style.transform = 'scale(1.15) translateY(-5px)';
        inner.style.filter = 'brightness(1.2) contrast(1.1)';
      });
      el.addEventListener('mouseleave', () => {
        main.style.transform = 'scale(1)';
        main.style.borderColor = 'rgba(212, 197, 179, 0.3)'; // accent theme
        inner.style.transform = 'scale(1) translateY(0)';
        inner.style.filter = 'none';
      });
    });
  }

  // Support Astro View Transitions
  setupCursor();
  document.addEventListener('astro:page-load', setupCursor);
</script>
