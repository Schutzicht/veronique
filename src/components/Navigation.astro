---
---
<nav id="navbar" class="fixed top-0 left-0 w-full z-[100] transition-all duration-300 py-6 px-6 md:px-8 bg-transparent">
  <div class="max-w-5xl mx-auto flex justify-between items-center w-full">
    <!-- Desktop Left Menu -->
    <div class="hidden md:flex items-center gap-8">
      <a href="#about" class="text-xs uppercase tracking-[0.2em] font-medium hover:text-accent transition-colors">About</a>
      <a href="#values" class="text-xs uppercase tracking-[0.2em] font-medium hover:text-accent transition-colors">Values</a>
    </div>

    <!-- logo -->
    <a href="/" class="text-xl md:text-2xl font-serif tracking-widest uppercase z-50">BIDA ISLA</a>

    <!-- Desktop Right Menu -->
    <div class="hidden md:flex items-center gap-8">
      <a href="#collections" class="text-xs uppercase tracking-[0.2em] font-medium hover:text-accent transition-colors">Collections</a>
      <a href="#join" class="px-6 py-2 border border-primary/20 text-xs uppercase tracking-[0.2em] font-medium hover:bg-primary hover:text-bone transition-all">Waitlist</a>
    </div>

    <!-- Mobile Menu Toggle -->
    <button id="mobile-menu-btn" class="md:hidden flex flex-col gap-1.5 p-2 z-50 cursor-pointer" aria-label="Open Menu">
      <span class="w-6 h-0.5 bg-primary"></span>
      <span class="w-6 h-0.5 bg-primary"></span>
      <span class="w-6 h-0.5 bg-primary"></span>
    </button>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div id="mobile-menu-overlay" class="fixed inset-0 bg-bone z-[110] translate-x-full transition-transform duration-500 ease-in-out md:hidden flex flex-col items-center justify-center gap-12">
  <div class="absolute top-0 right-0 p-6 pt-5 pr-6">
    <button id="close-menu-btn" class="p-4 cursor-pointer focus:outline-none" aria-label="Close Menu">
      <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <div class="flex flex-col items-center gap-10">
    <a href="#about" class="mobile-nav-link text-3xl font-serif italic text-primary hover:text-accent transition-colors">About</a>
    <a href="#values" class="mobile-nav-link text-3xl font-serif italic text-primary hover:text-accent transition-colors">Values</a>
    <a href="#collections" class="mobile-nav-link text-3xl font-serif italic text-primary hover:text-accent transition-colors">Collections</a>
    <a href="#join" class="mobile-nav-link px-10 py-4 bg-primary text-bone text-xs uppercase tracking-[0.2em] font-medium mt-4">Join Waitlist</a>
  </div>
  
  <div class="absolute bottom-12 flex gap-8">
    <a href="#" class="text-[10px] uppercase tracking-widest text-primary/40 hover:text-primary transition-colors">Instagram</a>
    <a href="#" class="text-[10px] uppercase tracking-widest text-primary/40 hover:text-primary transition-colors">TikTok</a>
  </div>
</div>

<script>
  function setupNavigation() {
    const nav = document.getElementById('navbar');
    const menuBtn = document.getElementById('mobile-menu-btn');
    const closeBtn = document.getElementById('close-menu-btn');
    const menuOverlay = document.getElementById('mobile-menu-overlay');
    const links = menuOverlay?.querySelectorAll('.mobile-nav-link');

    // Scroll effect for background
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        nav?.classList.add('bg-bone/80', 'backdrop-blur-md', 'py-4', 'shadow-sm');
        nav?.classList.remove('bg-transparent', 'py-6');
      } else {
        nav?.classList.remove('bg-bone/80', 'backdrop-blur-md', 'py-4', 'shadow-sm');
        nav?.classList.add('bg-transparent', 'py-6');
      }
    });

    const toggleMenu = () => {
      menuOverlay?.classList.toggle('translate-x-full');
      document.body.classList.toggle('overflow-hidden');
    };

    menuBtn?.addEventListener('click', toggleMenu);
    closeBtn?.addEventListener('click', toggleMenu);

    links?.forEach(link => {
      link.addEventListener('click', () => {
        if (!menuOverlay?.classList.contains('translate-x-full')) {
          toggleMenu();
        }
      });
    });
  }

  // Support for both initial load and Astro View Transitions
  setupNavigation();
  document.addEventListener('astro:page-load', setupNavigation);
</script>
